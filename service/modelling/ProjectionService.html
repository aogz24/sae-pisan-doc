<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>saePisan.service.modelling.ProjectionService API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>saePisan.service.modelling.ProjectionService</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="saePisan.service.modelling.ProjectionService.assign_as_factor"><code class="name flex">
<span>def <span class="ident">assign_as_factor</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_as_factor(parent):
    &#34;&#34;&#34;
    Assigns selected variables as factors and updates the parent object&#39;s factor list and model.
    Args:
        parent: The parent object containing the variables list and factor list.
    The function performs the following steps:
    1. Retrieves the selected indexes from the parent&#39;s variables list.
    2. Extracts the data from the selected indexes and adds them to a new list of variables.
    3. Updates the parent&#39;s factor variable list by adding new variables if they are not already present.
    4. Updates the parent&#39;s factor model with the new factor variable list.
    5. Removes the selected variables from the parent&#39;s variables list.
    6. Calls the `show_r_script` function to update the R script display.
    &#34;&#34;&#34;
    
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        old_var = parent.as_factor_var[0] if parent.as_factor_var else None
        last_index = selected_indexes[-1]  # Get the last selected index
        new_var = last_index.data()  # Get the data of the last selected variable
        parent.as_factor_var = [new_var]  # Assign only the last variable
        parent.as_factor_model.setStringList(parent.as_factor_var)
        parent.variables_list.model().removeRow(last_index.row())  # Remove the last selected variable from the list
        if old_var:
            parent.variables_list.model().insertRow(0)
            parent.variables_list.model().setData(parent.variables_list.model().index(0), old_var)
        show_r_script(parent)</code></pre>
</details>
<div class="desc"><p>Assigns selected variables as factors and updates the parent object's factor list and model.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>The parent object containing the variables list and factor list.</dd>
</dl>
<p>The function performs the following steps:
1. Retrieves the selected indexes from the parent's variables list.
2. Extracts the data from the selected indexes and adds them to a new list of variables.
3. Updates the parent's factor variable list by adding new variables if they are not already present.
4. Updates the parent's factor model with the new factor variable list.
5. Removes the selected variables from the parent's variables list.
6. Calls the <code><a title="saePisan.service.modelling.ProjectionService.show_r_script" href="#saePisan.service.modelling.ProjectionService.show_r_script">show_r_script()</a></code> function to update the R script display.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.assign_auxilary"><code class="name flex">
<span>def <span class="ident">assign_auxilary</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_auxilary(parent):
    &#34;&#34;&#34;
    Assigns selected auxiliary variables from the parent object&#39;s variables list to its auxiliary variables list.
    Parameters:
    parent (object): The parent object containing the variables list and auxiliary variables list.
    Functionality:
    - Retrieves the selected indexes from the parent&#39;s variables list.
    - Filters out non-numeric variables from the selected indexes.
    - If no valid numeric variables are selected, displays a warning message.
    - Adds the new numeric variables to the parent&#39;s auxiliary variables list, ensuring no duplicates.
    - Updates the parent&#39;s auxiliary model with the new list of auxiliary variables.
    - Removes the selected variables from the parent&#39;s variables list.
    - Calls the show_r_script function with the parent object.
    &#34;&#34;&#34;
    
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        new_vars = []
        for index in selected_indexes:
            type_of_var = index.data().split(&#34; [&#34;)[1].replace(&#34;]&#34;, &#34;&#34;)
            if type_of_var != &#34;String&#34;:
                new_vars.append(index.data())
        if not new_vars:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Icon.Warning)
            msg.setText(&#34;No valid numeric variables selected. Please select at least one numeric variable.&#34;)
            msg.setWindowTitle(&#34;Warning&#34;)
            msg.exec()
            return
        parent.auxilary_vars = list(set(parent.auxilary_vars + new_vars))  # Add new variables if they are different
        parent.auxilary_model.setStringList(parent.auxilary_vars)
        for index in sorted(selected_indexes, reverse=True):
            parent.variables_list.model().removeRow(index.row())  # Remove from variables list
        show_r_script(parent)</code></pre>
</details>
<div class="desc"><p>Assigns selected auxiliary variables from the parent object's variables list to its auxiliary variables list.
Parameters:
parent (object): The parent object containing the variables list and auxiliary variables list.
Functionality:
- Retrieves the selected indexes from the parent's variables list.
- Filters out non-numeric variables from the selected indexes.
- If no valid numeric variables are selected, displays a warning message.
- Adds the new numeric variables to the parent's auxiliary variables list, ensuring no duplicates.
- Updates the parent's auxiliary model with the new list of auxiliary variables.
- Removes the selected variables from the parent's variables list.
- Calls the show_r_script function with the parent object.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.assign_domains"><code class="name flex">
<span>def <span class="ident">assign_domains</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_domains(parent):
    &#34;&#34;&#34;
    Assigns one or more selected domain variables from the variables list to the domain model.
    Parameters:
    parent (object): The parent object containing the variables list and domain model.
    The function performs the following steps:
    1. Retrieves the selected indexes from the parent&#39;s variables list.
    2. If there are selected indexes, assigns all selected variables to the parent&#39;s domain variable list.
    3. Updates the parent&#39;s domain model with the selected domain variables.
    4. Removes the selected variables from the parent&#39;s variables list.
    5. Calls the show_r_script function with the parent object.
    &#34;&#34;&#34;
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        new_vars = [index.data() for index in selected_indexes]
        parent.domain_var = list(set(parent.domain_var + new_vars))
        parent.domain_model.setStringList(parent.domain_var)
        for index in sorted(selected_indexes, reverse=True):
            parent.variables_list.model().removeRow(index.row())
        show_r_script(parent)</code></pre>
</details>
<div class="desc"><p>Assigns one or more selected domain variables from the variables list to the domain model.
Parameters:
parent (object): The parent object containing the variables list and domain model.
The function performs the following steps:
1. Retrieves the selected indexes from the parent's variables list.
2. If there are selected indexes, assigns all selected variables to the parent's domain variable list.
3. Updates the parent's domain model with the selected domain variables.
4. Removes the selected variables from the parent's variables list.
5. Calls the show_r_script function with the parent object.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.assign_index"><code class="name flex">
<span>def <span class="ident">assign_index</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_index(parent):
    &#34;&#34;&#34;
    Assigns the selected index from the variables list to the index variable of the parent object,
    updates the index model with the new index, removes the selected index from the variables list,
    and calls the show_r_script function.
    Args:
        parent: An object that contains the following attributes:
            - variables_list: A QListView or similar widget that holds the list of variables.
            - index_var: A list to store the selected index data.
            - index_model: A QStringListModel or similar model to update with the new index.
    Returns:
        None
    &#34;&#34;&#34;
    
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        for index in selected_indexes:
            old_var = parent.index_var[0] if parent.index_var else None
            parent.index_var = [index.data()]
            parent.index_model.setStringList(parent.index_var)
            parent.variables_list.model().removeRow(selected_indexes[-1].row())  # Remove from variables list
            if old_var:
                parent.variables_list.model().insertRow(0)
                parent.variables_list.model().setData(parent.variables_list.model().index(0), old_var)
            show_r_script(parent)
            break</code></pre>
</details>
<div class="desc"><p>Assigns the selected index from the variables list to the index variable of the parent object,
updates the index model with the new index, removes the selected index from the variables list,
and calls the show_r_script function.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>An object that contains the following attributes:
- variables_list: A QListView or similar widget that holds the list of variables.
- index_var: A list to store the selected index data.
- index_model: A QStringListModel or similar model to update with the new index.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.assign_of_interest"><code class="name flex">
<span>def <span class="ident">assign_of_interest</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_of_interest(parent):
    &#34;&#34;&#34;
    Assigns the variable of interest from the selected indexes in the variables list.
    This function checks the selected variables in the `variables_list` of the `parent` object.
    If the selected variable is of type &#34;String&#34; and the projection method is &#34;Linear&#34;, it shows a warning message.
    Otherwise, it assigns the selected variable as the variable of interest, updates the `of_interest_model`,
    removes the variable from the `variables_list`, and calls the `show_r_script` function.
    Args:
        parent: The parent object containing the variables list, projection method, and other related attributes.
    Raises:
        QMessageBox: Displays a warning message if all selected variables are of type &#34;String&#34; and the projection method is &#34;Linear&#34;.
    &#34;&#34;&#34;
    
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        all_string = False
        for index in selected_indexes:
            type_of_var = index.data().split(&#34; [&#34;)[1].replace(&#34;]&#34;, &#34;&#34;)
            if type_of_var == &#34;String&#34; and parent.projection_method == &#34;Linear&#34;:
                all_string = True
                break
            else:
                all_string = False
                old_var = parent.of_interest_var[0] if parent.of_interest_var else None
                parent.of_interest_var = [index.data()]
                parent.of_interest_model.setStringList(parent.of_interest_var)
                parent.variables_list.model().removeRow(index.row())
                if old_var:
                    parent.variables_list.model().insertRow(0)
                    parent.variables_list.model().setData(parent.variables_list.model().index(0), old_var)
                show_r_script(parent)
                break
        if all_string:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Icon.Warning)
            msg.setText(&#34;All selected variables are of type String. Variable of interest must be of type Numeric.&#34;)
            msg.setWindowTitle(&#34;Warning&#34;)
            msg.exec()</code></pre>
</details>
<div class="desc"><p>Assigns the variable of interest from the selected indexes in the variables list.
This function checks the selected variables in the <code>variables_list</code> of the <code>parent</code> object.
If the selected variable is of type "String" and the projection method is "Linear", it shows a warning message.
Otherwise, it assigns the selected variable as the variable of interest, updates the <code>of_interest_model</code>,
removes the variable from the <code>variables_list</code>, and calls the <code><a title="saePisan.service.modelling.ProjectionService.show_r_script" href="#saePisan.service.modelling.ProjectionService.show_r_script">show_r_script()</a></code> function.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>The parent object containing the variables list, projection method, and other related attributes.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>QMessageBox</code></dt>
<dd>Displays a warning message if all selected variables are of type "String" and the projection method is "Linear".</dd>
</dl></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.assign_strata"><code class="name flex">
<span>def <span class="ident">assign_strata</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_strata(parent):
    &#34;&#34;&#34;
    Assigns a selected variable to the strata list and updates the UI components accordingly.
    Args:
        parent: The parent object that contains the UI components and variables list.
    The function performs the following steps:
    1. Retrieves the selected indexes from the variables list.
    2. If there are selected indexes, it assigns the first selected variable to the strata list.
    3. Updates the strata model with the new strata variable.
    4. Removes the selected variable from the variables list.
    5. Calls the show_r_script function to update the R script display.
    &#34;&#34;&#34;
    
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        old_var = parent.strata_var[0] if parent.strata_var else None
        parent.strata_var = [selected_indexes[0].data()]  # Only one variable
        parent.strata_model.setStringList(parent.strata_var)
        parent.variables_list.model().removeRow(selected_indexes[0].row())  # Remove from variables list
        if old_var:
            parent.variables_list.model().insertRow(0)
            parent.variables_list.model().setData(parent.variables_list.model().index(0), old_var)
        show_r_script(parent)</code></pre>
</details>
<div class="desc"><p>Assigns a selected variable to the strata list and updates the UI components accordingly.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>The parent object that contains the UI components and variables list.</dd>
</dl>
<p>The function performs the following steps:
1. Retrieves the selected indexes from the variables list.
2. If there are selected indexes, it assigns the first selected variable to the strata list.
3. Updates the strata model with the new strata variable.
4. Removes the selected variable from the variables list.
5. Calls the show_r_script function to update the R script display.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.assign_weight"><code class="name flex">
<span>def <span class="ident">assign_weight</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def assign_weight(parent):
    &#34;&#34;&#34;
    Assigns a weight variable from the selected indexes in the variables list.
    Parameters:
    parent (object): The parent object containing the variables list and weight model.
    Behavior:
    - Checks the selected indexes in the variables list.
    - If any selected variable is not of type &#34;String&#34;, assigns it as the weight variable.
    - Updates the weight model with the selected weight variable.
    - Removes the selected weight variable from the variables list.
    - Calls the show_r_script function with the parent object.
    - If all selected variables are of type &#34;String&#34;, displays a warning message indicating that the weight variable must be of type Numeric.
    &#34;&#34;&#34;
    
    selected_indexes = parent.variables_list.selectedIndexes()
    if selected_indexes:
        all_string = True
        for index in selected_indexes:
            type_of_var = index.data().split(&#34; [&#34;)[1].replace(&#34;]&#34;, &#34;&#34;)
            if type_of_var != &#34;String&#34;:
                all_string = False
                old_var = parent.weight_var[0] if parent.weight_var else None
                parent.weight_var = [index.data()]  # Only one variable
                parent.weight_model.setStringList(parent.weight_var)
                parent.variables_list.model().removeRow(index.row())  # Remove from variables list
                if old_var:
                    parent.variables_list.model().insertRow(0)
                    parent.variables_list.model().setData(parent.variables_list.model().index(0), old_var)
                show_r_script(parent)
                break
        if all_string:
            msg = QMessageBox()
            msg.setIcon(QMessageBox.Icon.Warning)
            msg.setText(&#34;All selected variables are of type String. Weight variable must be of type Numeric.&#34;)
            msg.setWindowTitle(&#34;Warning&#34;)
            msg.exec()</code></pre>
</details>
<div class="desc"><p>Assigns a weight variable from the selected indexes in the variables list.
Parameters:
parent (object): The parent object containing the variables list and weight model.
Behavior:
- Checks the selected indexes in the variables list.
- If any selected variable is not of type "String", assigns it as the weight variable.
- Updates the weight model with the selected weight variable.
- Removes the selected weight variable from the variables list.
- Calls the show_r_script function with the parent object.
- If all selected variables are of type "String", displays a warning message indicating that the weight variable must be of type Numeric.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.generate_r_script"><code class="name flex">
<span>def <span class="ident">generate_r_script</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generate_r_script(parent):
    &#34;&#34;&#34;
    Generates an R script based on the provided parent object.
    Args:
        parent: An object containing the following attributes:
            - of_interest_var: List of variables of interest.
            - auxilary_vars: List of auxiliary variables.
            - as_factor_var: List of variables to be treated as factors.
            - index_var: List of index variables.
            - domain_var: List of domain variables.
            - weight_var: List of weight variables.
            - strata_var: List of strata variables.
            - projection_method: String specifying the projection method (e.g., &#34;Linear&#34;, &#34;Logistic&#34;, &#34;SVM Linear&#34;, &#34;SVM RBF&#34;, &#34;Neural Network&#34;, &#34;Gradient Boost&#34;).
            - epoch: Integer specifying the number of epochs (used for Neural Network).
            - learning_rate: Float specifying the learning rate (used for Neural Network).
            - var_position: String specifying the position of variables (&#34;After&#34; or &#34;Before&#34;).
            - model_name: String specifying the model name.
            - separator: String specifying the separator to be used.
            - projection_name: String specifying the projection name.
            - selection_method: String specifying the selection method (e.g., &#34;Stepwise&#34;, &#34;None&#34;).
            - metric: String specifying the model metric.
            - k_fold: Integer specifying the number of folds for cross-validation.
            - grid: Grid specification for tuning parameters.
    Returns:
        str: The generated R script as a string.
    &#34;&#34;&#34;
    
    def format_var(var_list, as_factor=False):
        if not var_list:
            return &#39;&#39;
        if as_factor:
            return &#34; + &#34;.join([f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)}&#39; for var in var_list])
        return &#34; + &#34;.join([var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;) for var in var_list])

    def format_single_var(var):
        return f&#39;{var[0].split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)}&#39; if var else &#39;&#39;

    def format_edit_var(var, prefix):
        return f&#39;{prefix}{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)}&#39;
    
    def format_edit_var_before(var, prefix):
        return f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)}{prefix}&#39;

    def format_domain_var(domain_var_list):
        if not domain_var_list:
            return &#39;NULL&#39;
        if len(domain_var_list) == 1:
            return f&#39;&#34;{domain_var_list[0].split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)}&#34;&#39;
        else:
            names = [f&#39;&#34;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)}&#34;&#39; for var in domain_var_list]
            return f&#39;c({&#34;, &#34;.join(names)})&#39;
    
    of_interest_var = format_single_var(parent.of_interest_var)
    auxilary_vars = format_var(parent.auxilary_vars)
    as_factor_var = format_var(parent.as_factor_var, as_factor=True)
    index_var = format_single_var(parent.index_var)
    domain_var = format_domain_var(parent.domain_var)
    weight = format_single_var(parent.weight_var)
    strata = format_single_var(parent.strata_var) if parent.strata_var else &#39;NULL&#39;

    model_var = {
        &#34;Linear&#34;: &#34;linear_reg()&#34;,
        &#34;Logistic&#34;: &#34;logistic_reg()&#34;,
        &#34;SVM Linear&#34;: &#34;svm_linear(mode=&#39;classification&#39;)&#34;,
        &#34;SVM RBF&#34;: &#34;svm_rbf(mode=&#39;classification&#39;)&#34;,
        &#34;Neural Network&#34;: f&#34;mlp(mode=&#39;classification&#39;, engine=&#39;nnet&#39;, epochs={parent.epoch}, learn_rate={parent.learning_rate})&#34;
    }.get(parent.projection_method, &#39;gb_model&#39;)

    if auxilary_vars or as_factor_var:
        formula_parts = [of_interest_var]
        if auxilary_vars:
            formula_parts.append(auxilary_vars)
        if as_factor_var:
            formula_parts.append(as_factor_var)
        formula = f&#34;{of_interest_var} ~ {&#39; + &#39;.join(filter(None, formula_parts[1:]))}&#34;
    else:
        formula = f&#34;{of_interest_var} ~ 1&#34;
    
    r_script = f&#39;formula &lt;- {formula}\n&#39;
    if parent.projection_method==&#34;Gradient Boost&#34;:
        r_script += f&#39;show_engines(&#34;boost_tree&#34;)\n&#39;
        r_script += f&#39;gb_model &lt;- boost_tree( mtry = tune(), trees = tune(), min_n = tune(), tree_depth = tune(), learn_rate = tune(), engine = &#34;xgboost&#34;)\n&#39;

    if parent.var_position == &#34;After&#34;:
        if parent.of_interest_var:
            var = parent.of_interest_var[0]
            var_name_edit = format_edit_var(var, parent.model_name + parent.separator)
            if parent.projection_method != &#34;Linear&#34;:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
            else:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.auxilary_vars:
            var_name_edit = format_edit_var(var, parent.model_name + parent.separator)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.as_factor_var:
            var_name_edit = format_edit_var(var, parent.model_name + parent.separator)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
        
        for var in parent.domain_var:
            var_name_edit = format_edit_var(var, parent.model_name + parent.separator)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var, prefix in [(weight, parent.model_name), (strata, parent.model_name), (index_var, parent.model_name)]:
            if var and var != &#39;NULL&#39;:
                var_edit = format_edit_var(var, prefix + parent.separator)
                r_script += f&#39;{var} &lt;- data_pe[[&#34;{var_edit}&#34;]];\n&#39;
                
        all_vars = parent.auxilary_vars + parent.as_factor_var + parent.of_interest_var + parent.domain_var + parent.index_var + parent.strata_var+parent.weight_var
        r_script += f&#39;data_model &lt;- data.frame({&#34;, &#34;.join([var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;) for var in all_vars])});\n&#39;
        r_script += f&#39;colnames(data_model) &lt;- sub(&#34;^{prefix}\\\\{parent.separator}&#34;, &#34;&#34;, colnames(data_model))\n&#39;
        
        if parent.of_interest_var:
            var = parent.of_interest_var[0]
            var_name_edit = format_edit_var(var, parent.projection_name + parent.separator)
            if parent.projection_method != &#34;Linear&#34;:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
            else:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.auxilary_vars:
            var_name_edit = format_edit_var(var, parent.projection_name + parent.separator)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.as_factor_var:
            var_name_edit = format_edit_var(var, parent.projection_name + parent.separator)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;

        for var in parent.domain_var:
            var_name_edit = format_edit_var(var, parent.projection_name + parent.separator)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var, prefix in [(weight, parent.projection_name), (strata, parent.projection_name), (index_var, parent.projection_name)]:
            if var and var != &#39;NULL&#39;:
                var_edit = format_edit_var(var, prefix + parent.separator)
                r_script += f&#39;{var} &lt;- data_pe[[&#34;{var_edit}&#34;]];\n&#39;

        all_vars = parent.auxilary_vars + parent.as_factor_var + parent.of_interest_var + parent.domain_var + parent.index_var + parent.strata_var+parent.weight_var
        r_script += f&#39;data_proj &lt;- data.frame({&#34;, &#34;.join([var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;) for var in all_vars])});\n&#39;
        if(parent.projection_method != &#34;Linear&#34;):
            r_script += f&#39;data_model${of_interest_var} &lt;- as.factor(data_model${of_interest_var})\n&#39;
            r_script += f&#39;data_proj${of_interest_var} &lt;- as.factor(data_proj${of_interest_var})\n&#39;
        r_script += f&#39;colnames(data_proj) &lt;- colnames(data_model)\n&#39;
    
    if parent.var_position == &#34;Before&#34;:
        if parent.of_interest_var:
            var = parent.of_interest_var[0]
            var_name_edit = format_edit_var_before(var, parent.separator + parent.model_name)
            if parent.projection_method != &#34;Linear&#34;:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
            else:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.auxilary_vars:
            var_name_edit = format_edit_var_before(var, parent.separator + parent.model_name)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.as_factor_var:
            var_name_edit = format_edit_var_before(var, parent.separator + parent.model_name)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
        
        for var in parent.domain_var:
            var_name_edit = format_edit_var_before(var, parent.separator + parent.model_name)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var, prefix in [(weight, parent.model_name), (strata, parent.model_name), (index_var, parent.model_name)]:
            if var and var != &#39;NULL&#39;:
                var_edit = format_edit_var_before(var, parent.separator + prefix)
                r_script += f&#39;{var} &lt;- data_pe[[&#34;{var_edit}&#34;]];\n&#39;
                
        all_vars = parent.auxilary_vars + parent.as_factor_var + parent.of_interest_var + parent.domain_var + parent.index_var + parent.strata_var+parent.weight_var
        r_script += f&#39;data_model &lt;- data.frame({&#34;, &#34;.join([var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;) for var in all_vars])});\n&#39;
        r_script += f&#39;colnames(data_model) &lt;- sub(&#34;\\\\{parent.separator}{prefix}$&#34;, &#34;&#34;, colnames(data_model))\n&#39;
        
        if parent.of_interest_var:
            var = parent.of_interest_var[0]
            var_name_edit = format_edit_var_before(var, parent.separator + parent.projection_name)
            if parent.projection_method != &#34;Linear&#34;:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
            else:
                r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.auxilary_vars:
            var_name_edit = format_edit_var_before(var, parent.separator + parent.projection_name)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;
        
        for var in parent.as_factor_var:
            var_name_edit = format_edit_var_before(var, parent.separator + parent.projection_name)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- as.factor(data_pe[[&#34;{var_name_edit}&#34;]]);\n&#39;
        
        for var in parent.domain_var:
            var_name_edit = format_edit_var_before(var, parent.separator + parent.projection_name)
            r_script += f&#39;{var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)} &lt;- data_pe[[&#34;{var_name_edit}&#34;]];\n&#39;    
        
        for var, prefix in [(weight, parent.projection_name), (strata, parent.projection_name), (index_var, parent.projection_name)]:
            if var and var != &#39;NULL&#39;:
                var_edit = format_edit_var_before(var, parent.separator + prefix)
                r_script += f&#39;{var} &lt;- data_pe[[&#34;{var_edit}&#34;]];\n&#39;
        
        all_vars = parent.auxilary_vars + parent.as_factor_var + parent.of_interest_var + parent.domain_var + parent.index_var + parent.strata_var+parent.weight_var
        r_script += f&#39;data_proj &lt;- data.frame({&#34;, &#34;.join([var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;) for var in all_vars])});\n&#39;
        if(parent.projection_method != &#34;Linear&#34;):
            r_script += f&#39;data_model${of_interest_var} &lt;- as.factor(data_model${of_interest_var})\n&#39;
            r_script += f&#39;data_proj${of_interest_var} &lt;- as.factor(data_proj${of_interest_var})\n&#39;
        r_script += f&#39;colnames(data_proj) &lt;- colnames(data_model)\n&#39;
    
    r_script += f&#39;data_model &lt;- data_model %&gt;% filter(!is.na({of_interest_var}))\n&#39;
    r_script += f&#39;data_proj &lt;- data_proj %&gt;% filter(!is.na({of_interest_var}))\n&#39;
    r_script += f&#39;data_model &lt;- data_model %&gt;% filter(!is.null({of_interest_var}))\n&#39;
    r_script += f&#39;data_proj &lt;- data_proj %&gt;% filter(!is.null({of_interest_var}))\n&#39;
    
    
    if parent.selection_method == &#34;Stepwise&#34;:
        parent.selection_method = &#34;both&#34;
    if parent.selection_method and parent.selection_method != &#34;None&#34; and auxilary_vars:
        r_script += f&#39;stepwise_model &lt;- step(formula, direction=&#34;{parent.selection_method.lower()}&#34;)\n&#39;
        r_script += f&#39;final_formula &lt;- formula(stepwise_model)\n&#39;
        r_script += f&#39;model_pe &lt;- projection(final_formula, id=&#34;{index_var}&#34;, weight=&#34;{weight}&#34;, strata=&#34;{strata}&#34;, domain={domain_var}, model={model_var}, data_model=data_model, data_proj=data_proj, model_metric={parent.metric}, kfold={parent.k_fold}, grid={parent.grid})\n&#39;
    else:
        if strata == &#39;NULL&#39;:
            r_script += f&#39;model_pe &lt;- projection(formula, id=&#34;{index_var}&#34;, weight=&#34;{weight}&#34;, strata={strata}, domain={domain_var}, model={model_var}, data_model=data_model, data_proj=data_proj, model_metric={parent.metric}, kfold={parent.k_fold}, grid={parent.grid})\n&#39;
        else:
            r_script += f&#39;model_pe &lt;- projection(formula, id=&#34;{index_var}&#34;, weight=&#34;{weight}&#34;, strata=&#34;{strata}&#34;, domain={domain_var}, model={model_var}, data_model=data_model, data_proj=data_proj, model_metric={parent.metric}, kfold={parent.k_fold}, grid={parent.grid})\n&#39;
        return r_script</code></pre>
</details>
<div class="desc"><p>Generates an R script based on the provided parent object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>An object containing the following attributes:
- of_interest_var: List of variables of interest.
- auxilary_vars: List of auxiliary variables.
- as_factor_var: List of variables to be treated as factors.
- index_var: List of index variables.
- domain_var: List of domain variables.
- weight_var: List of weight variables.
- strata_var: List of strata variables.
- projection_method: String specifying the projection method (e.g., "Linear", "Logistic", "SVM Linear", "SVM RBF", "Neural Network", "Gradient Boost").
- epoch: Integer specifying the number of epochs (used for Neural Network).
- learning_rate: Float specifying the learning rate (used for Neural Network).
- var_position: String specifying the position of variables ("After" or "Before").
- model_name: String specifying the model name.
- separator: String specifying the separator to be used.
- projection_name: String specifying the projection name.
- selection_method: String specifying the selection method (e.g., "Stepwise", "None").
- metric: String specifying the model metric.
- k_fold: Integer specifying the number of folds for cross-validation.
- grid: Grid specification for tuning parameters.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The generated R script as a string.</dd>
</dl></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.get_script"><code class="name flex">
<span>def <span class="ident">get_script</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_script(parent):
    &#34;&#34;&#34;
    Retrieves the text content from the &#39;r_script_edit&#39; attribute of the given parent object.
    Args:
        parent: An object that contains an attribute &#39;r_script_edit&#39; which is expected to be a QTextEdit or similar widget.
    Returns:
        str: The text content of the &#39;r_script_edit&#39; widget as a string.
    &#34;&#34;&#34;
    
    return parent.r_script_edit.toPlainText()  </code></pre>
</details>
<div class="desc"><p>Retrieves the text content from the 'r_script_edit' attribute of the given parent object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>An object that contains an attribute 'r_script_edit' which is expected to be a QTextEdit or similar widget.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The text content of the 'r_script_edit' widget as a string.</dd>
</dl></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.get_selected_variables"><code class="name flex">
<span>def <span class="ident">get_selected_variables</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_selected_variables(parent):
    &#34;&#34;&#34;
    Retrieve selected variables from the given parent object.
    Args:
        parent (object): An object containing the variables of interest.
    Returns:
        tuple: A tuple containing the following variables from the parent object:
            - of_interest_var: The primary variable of interest.
            - auxilary_vars: Auxiliary variables related to the primary variable.
            - vardir_var: Directional variable.
            - as_factor_var: Factor variable.
    &#34;&#34;&#34;
    
    return parent.of_interest_var, parent.auxilary_vars, parent.vardir_var, parent.as_factor_var</code></pre>
</details>
<div class="desc"><p>Retrieve selected variables from the given parent object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong> :&ensp;<code>object</code></dt>
<dd>An object containing the variables of interest.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>A tuple containing the following variables from the parent object:
- of_interest_var: The primary variable of interest.
- auxilary_vars: Auxiliary variables related to the primary variable.
- vardir_var: Directional variable.
- as_factor_var: Factor variable.</dd>
</dl></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.process_vars"><code class="name flex">
<span>def <span class="ident">process_vars</span></span>(<span>vars_list, prefix, suffix)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def process_vars(vars_list, prefix, suffix):
    &#34;&#34;&#34;
    Processes a list of variable names by modifying them with a given prefix and suffix,
    and generates R script lines to assign these modified variable names to data columns.
    Args:
        vars_list (list of str): List of variable names to be processed.
        prefix (str): Prefix to be added to each variable name.
        suffix (str): Suffix to be added to each variable name.
    Returns:
        None
    &#34;&#34;&#34;
    
    for var in vars_list:
        var_name = var.split(&#34; [&#34;)[0].replace(&#34; &#34;, &#34;_&#34;)
        var_name_edit = f&#34;{prefix}{var_name}{suffix}&#34;
        r_script += f&#39;{var_name} &lt;- data[&#34;{var_name_edit}&#34;];\n&#39;</code></pre>
</details>
<div class="desc"><p>Processes a list of variable names by modifying them with a given prefix and suffix,
and generates R script lines to assign these modified variable names to data columns.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>vars_list</code></strong> :&ensp;<code>list</code> of <code>str</code></dt>
<dd>List of variable names to be processed.</dd>
<dt><strong><code>prefix</code></strong> :&ensp;<code>str</code></dt>
<dd>Prefix to be added to each variable name.</dd>
<dt><strong><code>suffix</code></strong> :&ensp;<code>str</code></dt>
<dd>Suffix to be added to each variable name.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.set_selection_method"><code class="name flex">
<span>def <span class="ident">set_selection_method</span></span>(<span>parent, dialog)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_selection_method(parent, dialog):
    &#34;&#34;&#34;
    Sets various selection parameters for the parent object based on the current state of the UI elements,
    and then accepts the dialog and shows the R script.
    Parameters:
    parent (object): The parent object that contains the UI elements and attributes to be set.
    dialog (QDialog): The dialog that will be accepted after setting the parameters.
    Attributes Set on Parent:
    - metric (str): The selected model metric from the model_metric_combo UI element.
    - k_fold (str): The k-fold value from the kfold_edit UI element.
    - grid (str): The grid value from the grid_edit UI element.
    - epoch (str): The epoch value from the epoch_edit UI element.
    - learning_rate (str): The learning rate value from the learning_edit UI element.
    Actions:
    - Accepts the dialog.
    - Calls the show_r_script function with the parent object.
    &#34;&#34;&#34;
    
    # parent.selection_method = parent.method_combo.currentText()
    parent.metric = parent.model_metric_combo.currentText()
    parent.k_fold = parent.kfold_edit.text()
    parent.grid = parent.grid_edit.text()
    parent.epoch = parent.epoch_edit.text()
    parent.learning_rate = parent.learning_edit.text()
    dialog.accept()
    show_r_script(parent)</code></pre>
</details>
<div class="desc"><p>Sets various selection parameters for the parent object based on the current state of the UI elements,
and then accepts the dialog and shows the R script.
Parameters:
parent (object): The parent object that contains the UI elements and attributes to be set.
dialog (QDialog): The dialog that will be accepted after setting the parameters.
Attributes Set on Parent:
- metric (str): The selected model metric from the model_metric_combo UI element.
- k_fold (str): The k-fold value from the kfold_edit UI element.
- grid (str): The grid value from the grid_edit UI element.
- epoch (str): The epoch value from the epoch_edit UI element.
- learning_rate (str): The learning rate value from the learning_edit UI element.
Actions:
- Accepts the dialog.
- Calls the show_r_script function with the parent object.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.show_options"><code class="name flex">
<span>def <span class="ident">show_options</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def show_options(parent):
    &#34;&#34;&#34;
    Displays a dialog window with various options for configuring the projection method.
    Parameters:
    parent (QWidget): The parent widget to which this dialog belongs.
    The dialog includes the following options:
    - Model Metric: A combo box to select the model metric.
    - The number of partitions: A line edit to input the number of partitions (k-fold).
    - Grid: A line edit to input the grid size.
    - Epoch (conditionally visible): A line edit to input the number of epochs, visible only if the projection method is &#34;Neural Network&#34;.
    - Learning Rate (conditionally visible): A line edit to input the learning rate, visible only if the projection method is &#34;Neural Network&#34;.
    The dialog also includes OK and Cancel buttons to confirm or reject the selections.
    The OK button triggers the `set_selection_method` function with the parent and dialog as arguments.
    The Cancel button closes the dialog without saving changes.
    &#34;&#34;&#34;
    
    options_dialog = QDialog(parent)
    options_dialog.setWindowTitle(&#34;Options&#34;)

    layout = QVBoxLayout()

    # method_label = QLabel(&#34;Stepwise Selection Method:&#34;)
    # layout.addWidget(method_label)

    # parent.method_combo = QComboBox()
    # parent.method_combo.addItems([&#34;None&#34;, &#34;Stepwise&#34;, &#34;Forward&#34;, &#34;Backward&#34;])
    # layout.addWidget(parent.method_combo)

    model_metric_label = QLabel(&#34;Model Metric:&#34;)
    layout.addWidget(model_metric_label)

    parent.model_metric_combo = QComboBox()
    parent.model_metric_combo.addItems([&#34;yardstick::metric_set()&#34;, &#34;NULL&#34;])
    parent.model_metric_combo.setCurrentText(&#34;NULL&#34;)
    layout.addWidget(parent.model_metric_combo)

    kfold_label = QLabel(&#34;The number of partitions :&#34;)
    layout.addWidget(kfold_label)

    parent.kfold_edit = QLineEdit()
    parent.kfold_edit.setValidator(QIntValidator())
    parent.kfold_edit.setText(&#34;3&#34;)
    layout.addWidget(parent.kfold_edit)

    grid_label = QLabel(&#34;Grid:&#34;)
    layout.addWidget(grid_label)

    parent.grid_edit = QLineEdit()
    parent.grid_edit.setValidator(QIntValidator())
    parent.grid_edit.setText(&#34;10&#34;)
    layout.addWidget(parent.grid_edit)
    
    epoch_label = QLabel(&#34;Epoch&#34;)
    epoch_label.setVisible(False)
    layout.addWidget(epoch_label)
    
    parent.epoch_edit = QLineEdit()
    parent.epoch_edit.setValidator(QIntValidator())
    parent.epoch_edit.setText(&#34;10&#34;)
    parent.epoch_edit.setVisible(False)
    layout.addWidget(parent.epoch_edit)
    
    learning_label = QLabel(&#34;Learning Rate&#34;)
    learning_label.setVisible(False)
    layout.addWidget(learning_label)
    
    parent.learning_edit = QLineEdit()
    parent.learning_edit.setVisible(False)
    parent.learning_edit.setValidator(QDoubleValidator())
    parent.learning_edit.setText(&#34;0.01&#34;)
    layout.addWidget(parent.learning_edit)
    
    if(parent.projection_method==&#34;Neural Network&#34;):
        epoch_label.setVisible(True)
        parent.epoch_edit.setVisible(True)
        parent.hidden_unit_label.setVisible(True)
        parent.hidden_edit.setVisible(True)
        learning_label.setVisible(True)
        parent.learning_edit.setVisible(True)
    

    button_layout = QHBoxLayout()
    ok_button = QPushButton(&#34;OK&#34;)
    cancel_button = QPushButton(&#34;Cancel&#34;)
    button_layout.addWidget(ok_button)
    button_layout.addWidget(cancel_button)

    layout.addLayout(button_layout)

    options_dialog.setLayout(layout)

    ok_button.clicked.connect(lambda: set_selection_method(parent, options_dialog))
    cancel_button.clicked.connect(options_dialog.reject)

    options_dialog.exec()</code></pre>
</details>
<div class="desc"><p>Displays a dialog window with various options for configuring the projection method.
Parameters:
parent (QWidget): The parent widget to which this dialog belongs.
The dialog includes the following options:
- Model Metric: A combo box to select the model metric.
- The number of partitions: A line edit to input the number of partitions (k-fold).
- Grid: A line edit to input the grid size.
- Epoch (conditionally visible): A line edit to input the number of epochs, visible only if the projection method is "Neural Network".
- Learning Rate (conditionally visible): A line edit to input the learning rate, visible only if the projection method is "Neural Network".
The dialog also includes OK and Cancel buttons to confirm or reject the selections.
The OK button triggers the <code><a title="saePisan.service.modelling.ProjectionService.set_selection_method" href="#saePisan.service.modelling.ProjectionService.set_selection_method">set_selection_method()</a></code> function with the parent and dialog as arguments.
The Cancel button closes the dialog without saving changes.</p></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.show_r_script"><code class="name flex">
<span>def <span class="ident">show_r_script</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def show_r_script(parent):
    &#34;&#34;&#34;
    Generates an R script based on the given parent object and sets the text of the parent&#39;s R script editor.
    Args:
        parent: The parent object that contains the method to generate the R script and the R script editor.
    &#34;&#34;&#34;
    
    r_script = generate_r_script(parent)
    parent.r_script_edit.setText(r_script)</code></pre>
</details>
<div class="desc"><p>Generates an R script based on the given parent object and sets the text of the parent's R script editor.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>The parent object that contains the method to generate the R script and the R script editor.</dd>
</dl></div>
</dd>
<dt id="saePisan.service.modelling.ProjectionService.unassign_variable"><code class="name flex">
<span>def <span class="ident">unassign_variable</span></span>(<span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def unassign_variable(parent):
    &#34;&#34;&#34;
    Unassigns selected variables from various lists in the parent object and adds them back to the variables list.
    This function checks for selected indexes in the following lists in order:
    - of_interest_list
    - auxilary_list
    - index_list
    - as_factor_list
    - domain_list
    - strata_list
    - weight_list
    For each list, if there are selected items, it removes the selected items from the corresponding variable list in the parent object,
    updates the model for that list, and adds the items back to the variables list. Finally, it calls the show_r_script function.
    Args:
        parent: The parent object containing the lists and models to be updated.
    &#34;&#34;&#34;
    
    selected_indexes = parent.of_interest_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.of_interest_var = [var for var in parent.of_interest_var if var not in selected_items]
        parent.of_interest_model.setStringList(parent.of_interest_var)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return

    selected_indexes = parent.auxilary_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.auxilary_vars = [var for var in parent.auxilary_vars if var not in selected_items]
        parent.auxilary_model.setStringList(parent.auxilary_vars)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return

    selected_indexes = parent.index_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.index_var = [var for var in parent.index_var if var not in selected_items]
        parent.index_model.setStringList(parent.index_var)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return

    selected_indexes = parent.as_factor_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.as_factor_var = [var for var in parent.as_factor_var if var not in selected_items]
        parent.as_factor_model.setStringList(parent.as_factor_var)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return

    selected_indexes = parent.domain_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.domain_var = [var for var in parent.domain_var if var not in selected_items]
        parent.domain_model.setStringList(parent.domain_var)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return
    
    selected_indexes = parent.strata_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.strata_var = [var for var in parent.strata_var if var not in selected_items]
        parent.strata_model.setStringList(parent.strata_var)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return

    selected_indexes = parent.weight_list.selectedIndexes()
    if selected_indexes:
        selected_items = [index.data() for index in selected_indexes]
        parent.weight_var = [var for var in parent.weight_var if var not in selected_items]
        parent.weight_model.setStringList(parent.weight_var)
        for item in selected_items:
            parent.variables_list.model().insertRow(0)  # Add back to variables list
            parent.variables_list.model().setData(parent.variables_list.model().index(0), item)
        show_r_script(parent)
        return</code></pre>
</details>
<div class="desc"><p>Unassigns selected variables from various lists in the parent object and adds them back to the variables list.
This function checks for selected indexes in the following lists in order:
- of_interest_list
- auxilary_list
- index_list
- as_factor_list
- domain_list
- strata_list
- weight_list
For each list, if there are selected items, it removes the selected items from the corresponding variable list in the parent object,
updates the model for that list, and adds the items back to the variables list. Finally, it calls the show_r_script function.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parent</code></strong></dt>
<dd>The parent object containing the lists and models to be updated.</dd>
</dl></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="saePisan.service.modelling" href="index.html">saePisan.service.modelling</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_as_factor" href="#saePisan.service.modelling.ProjectionService.assign_as_factor">assign_as_factor</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_auxilary" href="#saePisan.service.modelling.ProjectionService.assign_auxilary">assign_auxilary</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_domains" href="#saePisan.service.modelling.ProjectionService.assign_domains">assign_domains</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_index" href="#saePisan.service.modelling.ProjectionService.assign_index">assign_index</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_of_interest" href="#saePisan.service.modelling.ProjectionService.assign_of_interest">assign_of_interest</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_strata" href="#saePisan.service.modelling.ProjectionService.assign_strata">assign_strata</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.assign_weight" href="#saePisan.service.modelling.ProjectionService.assign_weight">assign_weight</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.generate_r_script" href="#saePisan.service.modelling.ProjectionService.generate_r_script">generate_r_script</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.get_script" href="#saePisan.service.modelling.ProjectionService.get_script">get_script</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.get_selected_variables" href="#saePisan.service.modelling.ProjectionService.get_selected_variables">get_selected_variables</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.process_vars" href="#saePisan.service.modelling.ProjectionService.process_vars">process_vars</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.set_selection_method" href="#saePisan.service.modelling.ProjectionService.set_selection_method">set_selection_method</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.show_options" href="#saePisan.service.modelling.ProjectionService.show_options">show_options</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.show_r_script" href="#saePisan.service.modelling.ProjectionService.show_r_script">show_r_script</a></code></li>
<li><code><a title="saePisan.service.modelling.ProjectionService.unassign_variable" href="#saePisan.service.modelling.ProjectionService.unassign_variable">unassign_variable</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.5">
<title>sip-sae.view.components.ModelingSaeEblupPseudoDialog API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sip-sae.view.components.ModelingSaeEblupPseudoDialog</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog"><code class="flex name class">
<span>class <span class="ident">ModelingSaePseudoDialog</span></span>
<span>(</span><span>parent)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ModelingSaePseudoDialog(QDialog):
    &#34;&#34;&#34;
    A dialog for configuring and running the SAE Pseudo Eblup model.
    Attributes:
        run_model_finished (pyqtSignal): Signal emitted when the model run is finished.
        parent (QWidget): The parent widget.
        model2 (object): The second model associated with the parent.
        columns (list): List of column names.
        variables_label (QLabel): Label for the variables list.
        variables_list (QListView): List view for selecting variables.
        variables_model (QStringListModel): Model for the variables list.
        unassign_button (QPushButton): Button to unassign variables.
        assign_of_interest_button (QPushButton): Button to assign variable of interest.
        assign_aux_button (QPushButton): Button to assign auxiliary variables.
        assign_as_factor_button (QPushButton): Button to assign variables as factors.
        assign_vardir_button (QPushButton): Button to assign direct variance.
        assign_domain_button (QPushButton): Button to assign domain.
        of_interest_label (QLabel): Label for the variable of interest list.
        of_interest_list (QListView): List view for the variable of interest.
        of_interest_model (QStringListModel): Model for the variable of interest list.
        auxilary_label (QLabel): Label for the auxiliary variables list.
        auxilary_list (QListView): List view for the auxiliary variables.
        auxilary_model (QStringListModel): Model for the auxiliary variables list.
        as_factor_label (QLabel): Label for the factors of auxiliary variables list.
        as_factor_list (QListView): List view for the factors of auxiliary variables.
        as_factor_model (QStringListModel): Model for the factors of auxiliary variables list.
        vardir_label (QLabel): Label for the direct variance list.
        vardir_list (QListView): List view for the direct variance.
        vardir_model (QStringListModel): Model for the direct variance list.
        domain_label (QLabel): Label for the domain list.
        domain_list (QListView): List view for the domain.
        domain_model (QStringListModel): Model for the domain list.
        option_button (QPushButton): Button to show options.
        text_script (QLabel): Label for the R script.
        icon_label (QLabel): Label for the running icon.
        r_script_edit (QTextEdit): Text edit for displaying and editing the R script.
        ok_button (QPushButton): Button to run the model.
        of_interest_var (list): List of variables of interest.
        auxilary_vars (list): List of auxiliary variables.
        vardir_var (list): List of direct variance variables.
        as_factor_var (list): List of factors of auxiliary variables.
        domain_var (list): List of domain variables.
        selection_method (str): Method of selection.
        finnish (bool): Flag indicating if the process is finished.
        stop_thread (threading.Event): Event to stop the thread.
    Methods:
        closeEvent(event): Handles the close event of the dialog.
        set_model(model): Sets the model and updates the variables list.
        accept(): Validates input and runs the model.
        on_run_model_finished(result, error, sae_model, r_script): Handles the completion of the model run.
    &#34;&#34;&#34;
    
    run_model_finished = pyqtSignal(object, object, object, object)
    def __init__(self, parent):
        super().__init__(parent)
        self.parent = parent
        self.model2 = parent.model2
        self.setWindowTitle(&#34;SAE Pseudo Eblup&#34;)
        self.setFixedHeight(700)

        self.columns = []

        main_layout = QVBoxLayout()
        
        scroll_area = QScrollArea()
        scroll_area.setWidgetResizable(True)
        scroll_content = QWidget()
        scroll_layout = QVBoxLayout(scroll_content)

        # Layout utama untuk membagi area menjadi dua bagian (kiri dan kanan)
        split_layout = QHBoxLayout()

        # Layout kiri untuk daftar variabel
        left_layout = QVBoxLayout()
        self.variables_label = QLabel(&#34;Select Variables:&#34;)
        self.variables_list = QListView()
        self.variables_model = QStringListModel(self.columns)
        self.variables_list.setModel(self.variables_model)
        self.variables_list.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)
        left_layout.addWidget(self.variables_label)
        left_layout.addWidget(self.variables_list)
        
        middle_layout1 = QVBoxLayout()
        self.unassign_button = QPushButton(&#34;ðŸ¡„&#34;)
        self.unassign_button.setObjectName(&#34;arrow_button&#34;)
        middle_layout1.addWidget(self.unassign_button)

        # Layout tengah untuk tombol panah
        middle_layout = QVBoxLayout()
        self.assign_of_interest_button = QPushButton(&#34;ðŸ¡†&#34;)
        self.assign_of_interest_button.setObjectName(&#34;arrow_button&#34;)
        self.assign_aux_button = QPushButton(&#34;ðŸ¡†&#34;)
        self.assign_aux_button.setObjectName(&#34;arrow_button&#34;)
        self.assign_as_factor_button = QPushButton(&#34;ðŸ¡†&#34;)
        self.assign_as_factor_button.setObjectName(&#34;arrow_button&#34;)
        self.assign_vardir_button = QPushButton(&#34;ðŸ¡†&#34;)
        self.assign_vardir_button.setObjectName(&#34;arrow_button&#34;)
        self.assign_domain_button = QPushButton(&#34;ðŸ¡†&#34;)
        self.assign_domain_button.setObjectName(&#34;arrow_button&#34;)

        self.assign_of_interest_button.clicked.connect(lambda: assign_of_interest(self))
        self.assign_aux_button.clicked.connect(lambda: assign_auxilary(self))
        self.assign_vardir_button.clicked.connect(lambda: assign_vardir(self))
        self.assign_as_factor_button.clicked.connect(lambda: assign_as_factor(self))
        self.assign_domain_button.clicked.connect(lambda: assign_domain(self))
        self.unassign_button.clicked.connect(lambda: unassign_variable(self))
        middle_layout.addWidget(self.assign_of_interest_button)
        middle_layout.addWidget(self.assign_aux_button)
        middle_layout.addWidget(self.assign_as_factor_button)
        middle_layout.addWidget(self.assign_vardir_button)
        middle_layout.addWidget(self.assign_domain_button)

        # Layout kanan untuk daftar dependen, independen, vardir, dan major area
        right_layout = QVBoxLayout()
        self.of_interest_label = QLabel(&#34;Variable of interest:&#34;)
        self.of_interest_list = QListView()
        self.of_interest_model = QStringListModel()
        self.of_interest_list.setModel(self.of_interest_model)
        self.of_interest_list.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)
        self.of_interest_list.setEditTriggers(QAbstractItemView.EditTrigger.NoEditTriggers)
        right_layout.addWidget(self.of_interest_label)
        right_layout.addWidget(self.of_interest_list)

        self.auxilary_label = QLabel(&#34;Auxilary Variable(s):&#34;)
        self.auxilary_list = QListView()
        self.auxilary_model = QStringListModel()
        self.auxilary_list.setModel(self.auxilary_model)
        self.auxilary_list.setSelectionMode(QAbstractItemView.SelectionMode.ExtendedSelection)
        self.auxilary_list.setEditTriggers(QAbstractItemView.EditTrigger.NoEditTriggers)
        right_layout.addWidget(self.auxilary_label)
        right_layout.addWidget(self.auxilary_list)

        self.as_factor_label = QLabel(&#34;as Factor of Auxilary Variable(s):&#34;)
        self.as_factor_list = QListView()
        self.as_factor_model = QStringListModel()
        self.as_factor_list.setModel(self.as_factor_model)
        self.as_factor_list.setEditTriggers(QAbstractItemView.EditTrigger.NoEditTriggers)
        right_layout.addWidget(self.as_factor_label)
        right_layout.addWidget(self.as_factor_list)
        
        self.vardir_label = QLabel(&#34;Direct Variance:&#34;)
        self.vardir_list = QListView()
        self.vardir_model = QStringListModel()
        self.vardir_list.setModel(self.vardir_model)
        self.vardir_list.setEditTriggers(QAbstractItemView.EditTrigger.NoEditTriggers)
        right_layout.addWidget(self.vardir_label)
        right_layout.addWidget(self.vardir_list)
        
        self.domain_label = QLabel(&#34;Domain:&#34;)
        self.domain_list = QListView()
        self.domain_model = QStringListModel()
        self.domain_list.setModel(self.domain_model)
        self.domain_list.setEditTriggers(QAbstractItemView.EditTrigger.NoEditTriggers)
        right_layout.addWidget(self.domain_label)
        right_layout.addWidget(self.domain_list)

        # Menambahkan layout kiri, tengah, dan kanan ke layout utama
        split_layout.addLayout(left_layout)
        split_layout.addLayout(middle_layout1)
        split_layout.addLayout(middle_layout)
        split_layout.addLayout(right_layout)

        scroll_layout.addLayout(split_layout)
        scroll_area.setWidget(scroll_content)
        main_layout.addWidget(scroll_area)

        # Tombol untuk menghasilkan skrip R
        self.option_button = QPushButton(&#34;Option&#34;)
        self.option_button.setFixedWidth(150)
        self.text_script = QLabel(&#34;R Script:&#34;)
        
        self.icon_label = QLabel()
        self.icon_label.setPixmap(QIcon(&#34;assets/running.svg&#34;).pixmap(QSize(16, 30)))
        self.icon_label.setFixedSize(16, 30)
        self.icon_label.setAlignment(Qt.AlignmentFlag.AlignRight | Qt.AlignmentFlag.AlignTop)

        # Create a horizontal layout to place the text_script and icon_label in one row
        script_layout = QHBoxLayout()
        script_layout.addWidget(self.text_script)
        script_layout.addWidget(self.icon_label)
        self.icon_label.setVisible(False)
        script_layout.setAlignment(self.text_script, Qt.AlignmentFlag.AlignLeft)
        script_layout.setAlignment(self.icon_label, Qt.AlignmentFlag.AlignRight)

        main_layout.addLayout(script_layout)
        
        # self.option_button.clicked.connect(lambda : show_options(self))
        self.option_button.setDisabled(True)
        
        # Area teks untuk menampilkan dan mengedit skrip R
        self.r_script_edit = QTextEdit()
        self.r_script_edit.setFixedHeight(150)
        self.r_script_edit.setReadOnly(False)
        main_layout.addWidget(self.r_script_edit)

        # Tombol untuk tindakan dialog
        button_layout = QHBoxLayout()
        button_layout.setObjectName(&#34;button_layout&#34;)
        self.ok_button = QPushButton(&#34;Run Model&#34;)
        self.ok_button.setFixedWidth(150)
        self.ok_button.clicked.connect(self.accept)
        button_layout.addWidget(self.option_button)
        button_layout.addWidget(self.ok_button)
        main_layout.addLayout(button_layout)

        self.setLayout(main_layout)

        self.of_interest_var = []
        self.auxilary_vars = []
        self.vardir_var = []
        self.as_factor_var = []
        self.domain_var = [] 
        self.selection_method = &#34;None&#34;
        self.finnish = False
        
        self.run_model_finished.connect(self.on_run_model_finished)
        
        self.stop_thread = threading.Event()
        
    def closeEvent(self, event):
        threads = threading.enumerate()
        for thread in threads:
            if thread.name == &#34;Pseudo&#34; and thread.is_alive():
                reply = QMessageBox.question(self, &#39;Run in Background&#39;, &#39;Do you want to run the model in the background?&#39;, QMessageBox.StandardButton.Yes | QMessageBox.StandardButton.No, QMessageBox.StandardButton.No)
                if reply != QMessageBox.StandardButton.Yes and not self.finnish:
                    self.stop_thread.set()
                    self.run_model_finished.emit(&#34;Threads are stopped&#34;, True, &#34;sae_model&#34;, &#34;&#34;)
        self.finnish = False
        event.accept()

    def set_model(self, model):
        self.model = model
        self.columns = [f&#34;{col} [{dtype}]&#34; if dtype == pl.Utf8 else f&#34;{col} [Numeric]&#34; for col, dtype in zip(self.model.get_data().columns, self.model.get_data().dtypes)]
        self.variables_model.setStringList(self.columns)
        self.vardir_model.setStringList([])
        self.auxilary_model.setStringList([])
        self.as_factor_model.setStringList([])
        self.domain_model.setStringList([])
        self.of_interest_model.setStringList([])
        self.of_interest_var = []
        self.auxilary_vars = []
        self.vardir_var = []
        self.as_factor_var = []
        self.domain_var = []
        self.selection_method = &#34;None&#34;
    
    def accept(self):
        if (not self.vardir_var or self.vardir_var == [&#34;&#34;]) and (not self.of_interest_var or self.of_interest_var == [&#34;&#34;]):
            QMessageBox.warning(self, &#34;Warning&#34;, &#34;Varians Direct and variable of interest cannot be empty.&#34;)
            self.ok_button.setEnabled(True)
            self.option_button.setEnabled(True)
            self.ok_button.setText(&#34;Run Model&#34;)
            return
        if not self.of_interest_var or self.of_interest_var == [&#34;&#34;]:
            QMessageBox.warning(self, &#34;Warning&#34;, &#34;Variable of interest cannot be empty.&#34;)
            self.ok_button.setEnabled(True)
            self.option_button.setEnabled(True)
            self.ok_button.setText(&#34;Run Model&#34;)
            return
        if not self.vardir_var or self.vardir_var == [&#34;&#34;]:
            QMessageBox.warning(self, &#34;Warning&#34;, &#34;Varians Direct cannot be empty.&#34;)
            self.ok_button.setEnabled(True)
            self.option_button.setEnabled(True)
            self.ok_button.setText(&#34;Run Model&#34;)
            return
        
        r_script = get_script(self)
        if not check_script(r_script):
            return
        disable_service(self)

        view = self.parent
        sae_model = SaeEblupPseudo(self.model, self.model2, view)
        controller = SaePseudoController(sae_model)
        
        current_context = contextvars.copy_context()
        
        def run_model_thread():
            result, error, df = None, None, None
            try:
                result, error, df = current_context.run(controller.run_model, r_script)
                if not error:
                    sae_model.model2.set_data(df)
            except Exception as e:
                error = e
            finally:
                if not self.stop_thread.is_set():
                    self.run_model_finished.emit(result, error, sae_model, r_script)
                    self.finnish = True

        def check_run_time():
            if thread.is_alive():
                reply = QMessageBox.question(self, &#39;Warning&#39;, &#39;Run has been running for more than 1 minute. Do you want to continue?&#39;)
                if reply == QMessageBox.StandardButton.No:
                    self.stop_thread.set()
                    QMessageBox.information(self, &#39;Info&#39;, &#39;Run has been stopped.&#39;)
                    enable_service(self, False, &#34;&#34;)


        thread = threading.Thread(target=run_model_thread, name=&#34;Pseudo&#34;)
        thread.start()

        timer = QTimer(self)
        timer.setSingleShot(True)
        timer.timeout.connect(check_run_time)
        timer.start(60000)
    
    def on_run_model_finished(self, result, error, sae_model, r_script):
        if not error:
            self.parent.update_table(2, sae_model.get_model2())
        display_script_and_output(self.parent, r_script, result)
        enable_service(self, error, result)
        self.finnish = True
        self.close()</code></pre>
</details>
<div class="desc"><p>A dialog for configuring and running the SAE Pseudo Eblup model.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>run_model_finished</code></strong> :&ensp;<code>pyqtSignal</code></dt>
<dd>Signal emitted when the model run is finished.</dd>
<dt><strong><code>parent</code></strong> :&ensp;<code>QWidget</code></dt>
<dd>The parent widget.</dd>
<dt><strong><code>model2</code></strong> :&ensp;<code>object</code></dt>
<dd>The second model associated with the parent.</dd>
<dt><strong><code>columns</code></strong> :&ensp;<code>list</code></dt>
<dd>List of column names.</dd>
<dt><strong><code>variables_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the variables list.</dd>
<dt><strong><code>variables_list</code></strong> :&ensp;<code>QListView</code></dt>
<dd>List view for selecting variables.</dd>
<dt><strong><code>variables_model</code></strong> :&ensp;<code>QStringListModel</code></dt>
<dd>Model for the variables list.</dd>
<dt><strong><code>unassign_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to unassign variables.</dd>
<dt><strong><code>assign_of_interest_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to assign variable of interest.</dd>
<dt><strong><code>assign_aux_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to assign auxiliary variables.</dd>
<dt><strong><code>assign_as_factor_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to assign variables as factors.</dd>
<dt><strong><code>assign_vardir_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to assign direct variance.</dd>
<dt><strong><code>assign_domain_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to assign domain.</dd>
<dt><strong><code>of_interest_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the variable of interest list.</dd>
<dt><strong><code>of_interest_list</code></strong> :&ensp;<code>QListView</code></dt>
<dd>List view for the variable of interest.</dd>
<dt><strong><code>of_interest_model</code></strong> :&ensp;<code>QStringListModel</code></dt>
<dd>Model for the variable of interest list.</dd>
<dt><strong><code>auxilary_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the auxiliary variables list.</dd>
<dt><strong><code>auxilary_list</code></strong> :&ensp;<code>QListView</code></dt>
<dd>List view for the auxiliary variables.</dd>
<dt><strong><code>auxilary_model</code></strong> :&ensp;<code>QStringListModel</code></dt>
<dd>Model for the auxiliary variables list.</dd>
<dt><strong><code>as_factor_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the factors of auxiliary variables list.</dd>
<dt><strong><code>as_factor_list</code></strong> :&ensp;<code>QListView</code></dt>
<dd>List view for the factors of auxiliary variables.</dd>
<dt><strong><code>as_factor_model</code></strong> :&ensp;<code>QStringListModel</code></dt>
<dd>Model for the factors of auxiliary variables list.</dd>
<dt><strong><code>vardir_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the direct variance list.</dd>
<dt><strong><code>vardir_list</code></strong> :&ensp;<code>QListView</code></dt>
<dd>List view for the direct variance.</dd>
<dt><strong><code>vardir_model</code></strong> :&ensp;<code>QStringListModel</code></dt>
<dd>Model for the direct variance list.</dd>
<dt><strong><code>domain_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the domain list.</dd>
<dt><strong><code>domain_list</code></strong> :&ensp;<code>QListView</code></dt>
<dd>List view for the domain.</dd>
<dt><strong><code>domain_model</code></strong> :&ensp;<code>QStringListModel</code></dt>
<dd>Model for the domain list.</dd>
<dt><strong><code>option_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to show options.</dd>
<dt><strong><code>text_script</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the R script.</dd>
<dt><strong><code>icon_label</code></strong> :&ensp;<code>QLabel</code></dt>
<dd>Label for the running icon.</dd>
<dt><strong><code>r_script_edit</code></strong> :&ensp;<code>QTextEdit</code></dt>
<dd>Text edit for displaying and editing the R script.</dd>
<dt><strong><code>ok_button</code></strong> :&ensp;<code>QPushButton</code></dt>
<dd>Button to run the model.</dd>
<dt><strong><code>of_interest_var</code></strong> :&ensp;<code>list</code></dt>
<dd>List of variables of interest.</dd>
<dt><strong><code>auxilary_vars</code></strong> :&ensp;<code>list</code></dt>
<dd>List of auxiliary variables.</dd>
<dt><strong><code>vardir_var</code></strong> :&ensp;<code>list</code></dt>
<dd>List of direct variance variables.</dd>
<dt><strong><code>as_factor_var</code></strong> :&ensp;<code>list</code></dt>
<dd>List of factors of auxiliary variables.</dd>
<dt><strong><code>domain_var</code></strong> :&ensp;<code>list</code></dt>
<dd>List of domain variables.</dd>
<dt><strong><code>selection_method</code></strong> :&ensp;<code>str</code></dt>
<dd>Method of selection.</dd>
<dt><strong><code>finnish</code></strong> :&ensp;<code>bool</code></dt>
<dd>Flag indicating if the process is finished.</dd>
<dt><strong><code>stop_thread</code></strong> :&ensp;<code>threading.Event</code></dt>
<dd>Event to stop the thread.</dd>
</dl>
<h2 id="methods">Methods</h2>
<p>closeEvent(event): Handles the close event of the dialog.
set_model(model): Sets the model and updates the variables list.
accept(): Validates input and runs the model.
on_run_model_finished(result, error, sae_model, r_script): Handles the completion of the model run.</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li>PyQt6.QtWidgets.QDialog</li>
<li>PyQt6.QtWidgets.QWidget</li>
<li>PyQt6.QtCore.QObject</li>
<li>PyQt6.sip.wrapper</li>
<li>PyQt6.QtGui.QPaintDevice</li>
<li>PyQt6.sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.accept"><code class="name flex">
<span>def <span class="ident">accept</span></span>(<span>self)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def accept(self):
    if (not self.vardir_var or self.vardir_var == [&#34;&#34;]) and (not self.of_interest_var or self.of_interest_var == [&#34;&#34;]):
        QMessageBox.warning(self, &#34;Warning&#34;, &#34;Varians Direct and variable of interest cannot be empty.&#34;)
        self.ok_button.setEnabled(True)
        self.option_button.setEnabled(True)
        self.ok_button.setText(&#34;Run Model&#34;)
        return
    if not self.of_interest_var or self.of_interest_var == [&#34;&#34;]:
        QMessageBox.warning(self, &#34;Warning&#34;, &#34;Variable of interest cannot be empty.&#34;)
        self.ok_button.setEnabled(True)
        self.option_button.setEnabled(True)
        self.ok_button.setText(&#34;Run Model&#34;)
        return
    if not self.vardir_var or self.vardir_var == [&#34;&#34;]:
        QMessageBox.warning(self, &#34;Warning&#34;, &#34;Varians Direct cannot be empty.&#34;)
        self.ok_button.setEnabled(True)
        self.option_button.setEnabled(True)
        self.ok_button.setText(&#34;Run Model&#34;)
        return
    
    r_script = get_script(self)
    if not check_script(r_script):
        return
    disable_service(self)

    view = self.parent
    sae_model = SaeEblupPseudo(self.model, self.model2, view)
    controller = SaePseudoController(sae_model)
    
    current_context = contextvars.copy_context()
    
    def run_model_thread():
        result, error, df = None, None, None
        try:
            result, error, df = current_context.run(controller.run_model, r_script)
            if not error:
                sae_model.model2.set_data(df)
        except Exception as e:
            error = e
        finally:
            if not self.stop_thread.is_set():
                self.run_model_finished.emit(result, error, sae_model, r_script)
                self.finnish = True

    def check_run_time():
        if thread.is_alive():
            reply = QMessageBox.question(self, &#39;Warning&#39;, &#39;Run has been running for more than 1 minute. Do you want to continue?&#39;)
            if reply == QMessageBox.StandardButton.No:
                self.stop_thread.set()
                QMessageBox.information(self, &#39;Info&#39;, &#39;Run has been stopped.&#39;)
                enable_service(self, False, &#34;&#34;)


    thread = threading.Thread(target=run_model_thread, name=&#34;Pseudo&#34;)
    thread.start()

    timer = QTimer(self)
    timer.setSingleShot(True)
    timer.timeout.connect(check_run_time)
    timer.start(60000)</code></pre>
</details>
<div class="desc"><p>accept(self)</p></div>
</dd>
<dt id="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.closeEvent"><code class="name flex">
<span>def <span class="ident">closeEvent</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def closeEvent(self, event):
    threads = threading.enumerate()
    for thread in threads:
        if thread.name == &#34;Pseudo&#34; and thread.is_alive():
            reply = QMessageBox.question(self, &#39;Run in Background&#39;, &#39;Do you want to run the model in the background?&#39;, QMessageBox.StandardButton.Yes | QMessageBox.StandardButton.No, QMessageBox.StandardButton.No)
            if reply != QMessageBox.StandardButton.Yes and not self.finnish:
                self.stop_thread.set()
                self.run_model_finished.emit(&#34;Threads are stopped&#34;, True, &#34;sae_model&#34;, &#34;&#34;)
    self.finnish = False
    event.accept()</code></pre>
</details>
<div class="desc"><p>closeEvent(self, a0: Optional[QCloseEvent])</p></div>
</dd>
<dt id="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.on_run_model_finished"><code class="name flex">
<span>def <span class="ident">on_run_model_finished</span></span>(<span>self, result, error, sae_model, r_script)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_run_model_finished(self, result, error, sae_model, r_script):
    if not error:
        self.parent.update_table(2, sae_model.get_model2())
    display_script_and_output(self.parent, r_script, result)
    enable_service(self, error, result)
    self.finnish = True
    self.close()</code></pre>
</details>
<div class="desc"></div>
</dd>
<dt id="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.run_model_finished"><code class="name flex">
<span>def <span class="ident">run_model_finished</span></span>(<span>...)</span>
</code></dt>
<dd>
<div class="desc"><p>pyqtSignal(*types, name: str = &hellip;, revision: int = &hellip;, arguments: Sequence = &hellip;) -&gt; PYQT_SIGNAL</p>
<p>types is normally a sequence of individual types.
Each type is either a
type object or a string that is the name of a C++ type.
Alternatively
each type could itself be a sequence of types each describing a different
overloaded signal.
name is the optional C++ name of the signal.
If it is not specified then
the name of the class attribute that is bound to the signal is used.
revision is the optional revision of the signal that is exported to QML.
If it is not specified then 0 is used.
arguments is the optional sequence of the names of the signal's arguments.</p></div>
</dd>
<dt id="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.set_model"><code class="name flex">
<span>def <span class="ident">set_model</span></span>(<span>self, model)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_model(self, model):
    self.model = model
    self.columns = [f&#34;{col} [{dtype}]&#34; if dtype == pl.Utf8 else f&#34;{col} [Numeric]&#34; for col, dtype in zip(self.model.get_data().columns, self.model.get_data().dtypes)]
    self.variables_model.setStringList(self.columns)
    self.vardir_model.setStringList([])
    self.auxilary_model.setStringList([])
    self.as_factor_model.setStringList([])
    self.domain_model.setStringList([])
    self.of_interest_model.setStringList([])
    self.of_interest_var = []
    self.auxilary_vars = []
    self.vardir_var = []
    self.as_factor_var = []
    self.domain_var = []
    self.selection_method = &#34;None&#34;</code></pre>
</details>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sip-sae.view.components" href="index.html">sip-sae.view.components</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog" href="#sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog">ModelingSaePseudoDialog</a></code></h4>
<ul class="">
<li><code><a title="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.accept" href="#sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.accept">accept</a></code></li>
<li><code><a title="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.closeEvent" href="#sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.closeEvent">closeEvent</a></code></li>
<li><code><a title="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.on_run_model_finished" href="#sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.on_run_model_finished">on_run_model_finished</a></code></li>
<li><code><a title="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.run_model_finished" href="#sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.run_model_finished">run_model_finished</a></code></li>
<li><code><a title="sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.set_model" href="#sip-sae.view.components.ModelingSaeEblupPseudoDialog.ModelingSaePseudoDialog.set_model">set_model</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.5</a>.</p>
</footer>
</body>
</html>
